doctype html
html(lang="en")
	include includes/head.pug
	body
		section.hero.is-full-height
			.hero-head
				include includes/nav.pug
			.hero-body
				.container.has-text-centered
					h1.title.is-1(style="padding-top: 1rem;")= (options.pageTitle || "")
			.hero-foot
		article.article
			include includes/body.pug
			+section()
				//- The counter allows collapsible tiles to show/hide in their respective boxes, by correlating the heading (button) and the content.
				- var counter = 0
				each record in records[0]
					if record.publish
						.box: .columns
							.column
								//- title: All
								if record.title
									div(data-boxgroup=counter, class=(options.collapsible) ? "collapsibleButton" : "")
										h1.is-unselectable(data-boxgroup=counter, class=(options.collapsible) ? ["collapsibleHeading", "has-text-grey"] : "")= record.title

								//- img: Ministries + Articles & Blogs
								.has-text-centered(data-boxgroup=counter, class=(options.collapsible) ? "collapsibleContent" : "")
									+addImg(record.img)
							.column.is-three-quarters(data-boxgroup=counter, class=(options.collapsible) ? "collapsibleContent" : "")
								//- Fixes glitch where padding sticks out
								p &nbsp;
								+addText(record.passage) //- passage: Sermons
								+addText(record.body) //- body: All

								//- date: Most
								if record.date
									p
										strong Date: &nbsp;
										+addDate(record.date, "span")

								//- demographic, meetingTimes, meetingPlace: Ministries
								.columns
									if record.demographic
										.column: p #[strong Demographic: ] #{record.demographic}
									if record.meetingTimes
										.column: p #[strong Meeting Times: ] #{record.meetingTimes}
									if record.meetingPlace
										.column: p #[strong Meeting Place: ] #{record.meetingPlace}

								//- author: Articles & Blogs
								if record.author
									p
										strong Author: &nbsp;
										span= records[1][record.author[0]]["name"]

								//- speaker, series, handout, slides, audio: Sermons
								.columns
									if record.speaker
										.column: p #[span: strong Speaker: ] &nbsp; #{records[1][record.speaker[0]]["name"]} &nbsp; (#{records[1][record.speaker[0]]["email"]})
									if record.series
										.column: p This sermon is part of the series #{records[2][record.series[0]]["name"]}.
								.columns
									if record.handout
										.column: a(href=(record.handout[0].url), target="_blank") Download handout
									if record.slides
										.column: a(href=(record.slides[0].url), target="_blank") Download slides
								if record.audio
										audio(controls, style="margin-bottom: 4.5rem"): source(src=(record.audio[0].url))

								//- contact: Most
								if record.contact
									p #[span: strong Contact: ] &nbsp; #{records[1][record.contact[0]]["name"]} &nbsp; (#{records[1][record.contact[0]]["email"]})
					- counter++;

		//- Footer
		include includes/footer.pug
