doctype html
html(lang="en")
	include includes/headNoIndex.pug
	body
		include includes/responsiveNav.pug
		article.article
			include includes/body.pug
			+addPageHeaderImage(options.pageTitle)
			+section("Archive")
				input#searchBar.input.is-rounded(type="text" placeholder="Search" onkeyup="searchArchive()")
				br
				br

				table.table.is-hoverable.is-fullwidth
					thead
						tr
							th Date
							th Sermon
							th Speaker
							th Passage
							th Download
					tbody#archiveTable
						each record in Object.values(records[0] || {})
							//- https://stackoverflow.com/questions/14581610/check-date-greater-than-30-days-from-todays-date/14581743
							//- https://stackoverflow.com/questions/9224773/js-check-if-date-is-less-than-1-hour-ago
							- var recordDate = new Date(record.date)
							- var ONE_MONTH = 30 * 24 * 60 * 60 * 1000 /* ms */
							//- If more than a month old
							if ((new Date) - recordDate) > ONE_MONTH
								tr
									td
										if record.date
											+addDate(record.date, "span")
									td: +addText(record.title)
									td
										if record.speaker
											+addText(record.speaker)
									td: +addText(record.passage)
									td
										if record.link
											a(href=record.link, target="_blank")
												+icon("fab fa-youtube")
											| &nbsp;
										if record.audio && record.audio.url
											a(onclick=`downloadFile("${record.audio.url}", "${record.title}.mp3")`)
												+icon("fa-volume-up")
											| &nbsp;
										if record.handout && record.handout.url
											a(href=record.handout.url, target="_blank")
												+icon("fa-file-download")
											| &nbsp;
										if record.slides && record.slides.url
											a(href=record.slides.url, target="_blank")
												+icon("fa-file-powerpoint")
											| &nbsp;

			+section()
				p #[a(href="/sermons") Click here] to go back to the latest sermons.

		//- Footer
		include includes/footer.pug
